# 互斥锁和信号量



并发编程量大核心问题：

- 互斥：即同一时刻只允许一个线程访问共享资源
- 同步：即线程之间如何通信、协作

而这两个问题都可以通过管程或者信号量来解决。



## 管程

那什么是管程？所谓管程，指的是管理共享变量以及对共享变量的操作过程，让他们支持并发，能够同时解决互斥和同步问题。

如何解决互斥？

所有的对共享资源的访问都必须进行enq,deq操作，enq()、deq() 保证互斥性，只允许一个线程进入管程。

如何解决同步？

同步要使用到条件变量，当操作不满足时，线程在条件变量上排队，等待条件满足后被唤醒，重新排队。

## 实例
实例代码可以看mutex/mailbox/t1/main.go，里面场景是模拟收发信件，当信箱满的时候，sender等待信箱为空，当信箱为空的时候，receiver等待信箱有信。

## mutex原理
可以查看 [sync.mutex 源代码分析](https://colobu.com/2018/12/18/dive-into-sync-mutex/)。





